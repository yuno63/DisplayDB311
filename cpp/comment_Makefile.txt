http://www.interface.ru/home.asp?artId=27579   ------------------------------------------------
gcc -o binary main.o -L. -luser -Wl,-rpath,. - 
Опция -L указывает линковщику, где ему искать библиотеку. В случае, если библиотека располагается в каталоге /lib или /usr/lib, то вопрос отпадает сам собой и опция -L не требуется. 
-luser - сокращение от libuser.so. 
Опция--Wl,-rpath,. компилятор gcc сам вызывает линковщик ld, когда это надо и передает ему нужные параметры сборки, избавляя нас от ненужной платформенно-зависимой волокиты. Но иногда мы все-таки должны вмешаться в этот процесс и передать линковщику "свою" опцию. Для этого используется опция компилятора -Wl,option,optargs,.… 
Так как линковщик ищет библиотеки в определенных местах; обычно это каталоги /lib и /usr/lib, иногда /usr/local/lib. Опция -rpath просто добавляет к этому списку еще один каталог. В нашем случае это текущий каталог

gcc -shared -o libuser.so swap.o 
Опция -shared педназначена для вызова линковщика и создания динамической библиотеки.

gcc -c -fPIC swap.c 
опция -fPIC (-fpic) при компиляции swap.c. Эта опция сообщает компилятору, что объектные файлы, полученные в результате компиляции должны содержать позиционно-независимый код (PIC - Position Independent Code), который используется в динамических библиотеках. В таком коде используются не фиксированные позиции (адреса), а плавающие, благодаря чему код из библиотеки имеет возможность подключаться к программе в момент запуска.
------------------------------------------------------------------------------------------------
